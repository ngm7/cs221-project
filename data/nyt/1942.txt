[Read our critics’ top 10 films of the year.]

Casting women in leading roles is still more the exception than the rule in Hollywood. Women accounted for about a quarter of sole protagonists in the top films of 2017, and they played roughly a third of major characters, according to research from San Diego State University.

The new report from C.A.A., a leading talent agency, is part of an effort to pressure Hollywood into putting more women and people of color onscreen and behind the scenes, with proponents arguing that greater diversity improves the bottom line. In 2017, the agency released a report indicating that movies with multiethnic casts performed better on opening weekends than those with more homogeneous casts. The new study was created in conjunction with a working group from Time’s Up, an organization fighting workplace sexual harassment; the working group aims to improve the portrayal of women onscreen.

The question now is whether the industry will take heed. The San Diego State University study also found that the number of female protagonists with speaking roles in top films dropped in 2017 from the previous year. The new statistics from C.A.A. suggests that the makers of those films might be hurting their earnings.

“A lot of times in our business there is a lot of bias disguising itself as knowledge,” Haubegger said.

The C.A.A. and shift7 report looked at the top films at the global box office each year from 2014 through 2017, using information from Gracenote, a data and technology provider owned by Nielsen. (The time frame was based on a database C.A.A. created for its diversity study.) “Lead actor” was determined by the performer listed first on Gracenote. This meant that both “Star Wars: The Force Awakens” and “Star Wars: The Last Jedi” were designated male-led films: Gracenote listed Harrison Ford and Mark Hamill as the leads for each, rather than Daisy Ridley. “Teenage Mutant Ninja Turtles” was led by Megan Fox and “Trolls” by Anna Kendrick.