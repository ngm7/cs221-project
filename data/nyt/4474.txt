Even some of Mr. Trump’s most ardent supporters were alarmed. “It is a major blunder,” a Republican senator, Marco Rubio of Florida, wrote on Twitter. “If it isn’t reversed it will haunt this administration & America for years to come.”

Senator Lindsey Graham, Republican of South Carolina, who generally supports Mr. Trump, said he and others in the national security establishment were “blindsided” by the announcement. He called for congressional hearings on the decision.

This isn’t the first time the president and his administration have sent mixed messages. During the 2016 campaign, Mr. Trump promised to withdraw troops from Syria and has been looking for a way do it ever since. In April, he gave the Pentagon more time to complete the mission, which since the Obama era has been strictly focused on finishing off the Islamic State. Then Mr. Bolton arrived on the job and declared that “we’re not going to leave as long as Iranian troops are outside Iranian borders, and that includes Iranian proxies and militias.”

As late as Monday, James Jeffrey, the State Department’s Syria envoy, told the Atlantic Council that the United States would stay in Syria until ISIS was defeated, Iranian influence was curbed and there was a political solution to the Syrian civil war.

But on Wednesday, Mr. Trump undercut his advisers, and American interests, by reversing course and declaring in a tweet, “We have defeated ISIS in Syria, my only reason for being there during the Trump Presidency.”

There was no attempt to use the leverage of an American withdrawal to achieve any specific political or military goal.

Mr. Trump’s assertion that the Islamic State is defeated is absurd. “We have won against ISIS,” he boasted in a video. The ability of the terrorists to strike has been significantly degraded and much of the territory they claimed for their so-called caliphate has been liberated. But the group still retains a pocket of land on the Syria-Iraq border and has roughly 20,000 to 30,000 fighters, according to military researchers. As Mr. Jeffrey said Monday, “The job is not yet done.”