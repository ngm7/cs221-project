More recently, in fall 2016, a group of men deployed by the Islamic State’s external operations arm in Syria planned to attack the market. French officials penetrated the cell and thwarted the attack, but it prompted the United States State Department to issue a travel alert, warning of credible threats against holiday events in Europe.

The market remained closed on Wednesday, leaving the city center mostly empty and cordoned off by security forces. Sports centers, cultural institutions and many shops in the area were closed, and security checks were reinforced.

Some witnesses of the attack first wondered whether the panic on Tuesday night was related to the “Yellow Vest” protests that have turned violent in recent weeks.

“It might be the biggest Christmas market in France — you’d never think of an attack when you hear the first gunshots,” said Marc Meyer, 32, who was standing by the market’s giant Christmas tree when he saw a panicked crowd rushing toward him around 8 p.m.

Jamel Beli, who was sitting on a nearby terrace when he heard the first gunshots, also thought the Yellow Vests were behind the agitation. “It was so, so crowded,” said Mr. Beli, 42. “It could very well have been carnage.”

Mr. Heitz, the prosecutor, said that the gunman was first seen shortly before 8 p.m. on the Rue des Orfèvres, in the heart of the Christmas market. He then moved through several streets, attacking with a handgun and a knife as he went.

Four soldiers on patrol shot at him, wounding him in the arm, Mr. Heitz said, but the attacker escaped and took a taxi to another area of Strasbourg. The driver told the police that the gunman had described the attack to him and tried to justify it. After exiting the taxi, the attacker came across more police officers, who shot at him but lost track of him.